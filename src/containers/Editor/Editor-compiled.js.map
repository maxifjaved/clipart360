{"version":3,"sources":["Editor.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA;;;;AACA;;IAAY,K;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIV,kBAAY,KAAZ,EAAmB;AAAA;;AAAA,sIACX,KADW;;AAEjB,UAAK,UAAL,GAAkB,KAAlB;AACA,UAAK,OAAL,GAAe,EAAf;AACA,UAAK,OAAL,GAAe,EAAE,OAAO,EAAT,EAAf;AAJiB;AAKlB;;;;wCAEmB;AAClB,WAAK,IAAL;AACA,aAAO,gBAAP,CAAwB,QAAxB,EAAkC,KAAK,kBAAL,CAAwB,IAAxB,CAA6B,IAA7B,CAAlC;AACD;;;2CAEsB;AACrB,UAAI,KAAK,OAAT,EAAkB;AAChB,6BAAsB,KAAK,OAA3B;AACD;;AAED,aAAO,mBAAP,CAA2B,QAA3B,EAAqC,KAAK,kBAAL,CAAwB,IAAxB,CAA6B,IAA7B,CAArC;AACD;;;2BAEM;AACL,WAAK,aAAL;AACA,WAAK,SAAL;AACA,WAAK,UAAL;AACA,WAAK,YAAL;AACA,WAAK,YAAL;AACA,WAAK,SAAL;AACA,WAAK,OAAL;AACD;;;oCAEe;AACd,WAAK,SAAL,GAAiB,mBAAS,WAAT,CAAqB,IAArB,CAAjB;AACA,WAAK,YAAL;AACD;;;gCAEW;AACV,WAAK,KAAL,GAAa,IAAI,MAAM,KAAV,EAAb;AACD;;;iCAEY;AACX,WAAK,MAAL,GAAc,IAAI,MAAM,iBAAV,CAA4B,EAA5B,EAAgC,KAAK,MAAL,CAAY,KAAZ,GAAoB,KAAK,MAAL,CAAY,MAAhE,EAAwE,CAAxE,EAA2E,KAA3E,CAAd;AACA,WAAK,MAAL,CAAY,QAAZ,CAAqB,CAArB,GAAyB,IAAzB;AACD;;;mCAEc,CAAE;;;mCAEF;AACb;AACA,WAAK,QAAL,GAAgB,IAAI,MAAM,aAAV,EAAhB;;AAEA,WAAK,kBAAL;AACA,WAAK,WAAL;AACD;;;gCAEW;AACV,WAAK,aAAL;AACD;;;mCAEc;AACb,WAAK,MAAL,GAAc;AACZ,eAAO,KAAK,SAAL,CAAe,WADV;AAEZ,gBAAQ,OAAO;AAFH,OAAd;AAID;;;yCAEoB;AACnB,UAAI,KAAK,QAAL,KAAkB,IAAtB,EAA4B;;AAE5B,WAAK,YAAL;AACA,WAAK,MAAL,CAAY,MAAZ,GAAqB,KAAK,MAAL,CAAY,KAAZ,GAAoB,KAAK,MAAL,CAAY,MAArD;AACA,WAAK,MAAL,CAAY,sBAAZ;AACA,WAAK,QAAL,CAAc,OAAd,CAAsB,KAAK,MAAL,CAAY,KAAlC,EAAyC,KAAK,MAAL,CAAY,MAArD;AACA,WAAK,aAAL;AACD;;;oCAEe;AACd,WAAK,UAAL,GAAkB,IAAlB;AACD;;;8BAES;AACR,WAAK,OAAL,GAAe,sBAAsB,KAAK,OAAL,CAAa,IAAb,CAAkB,IAAlB,CAAtB,CAAf;;AAEA,UAAI,KAAK,UAAT,EAAqB;AACnB,aAAK,WAAL;AACA,aAAK,UAAL,GAAkB,KAAlB;AACD;AACF;;;kCAGa;AACZ,cAAQ,GAAR,CAAY,QAAZ;AACA,WAAK,QAAL,CAAc,MAAd,CAAqB,KAAK,KAA1B,EAAiC,KAAK,MAAtC;AACD;;;6BAEQ;AACP,aACE,uCAAK,IAAG,kBAAR,GADF;AAID;;;;;AAGH,OAAO,SAAP,GAAmB;AACjB,gBAAc,kBAAU,IADP;AAEjB,WAAS,kBAAU,KAFF;AAGjB,WAAS,kBAAU;AAHF,CAAnB;;kBAMe,M","file":"Editor-compiled.js","sourcesContent":["import React, { Component, PropTypes } from 'react';\nimport ReactDOM from 'react-dom';\nimport * as THREE from 'three';\n\n\nclass Editor extends Component {\n  constructor(props) {\n    super(props);\n    this.needRender = false;\n    this.objects = [];\n    this.targets = { table: [] };\n  }\n\n  componentDidMount() {\n    this.init();\n    window.addEventListener('resize', this.updateCameraAspect.bind(this));\n  }\n\n  componentWillUnmount() {\n    if (this.request) {\n      cancelAnimationFrame( this.request );\n    }\n\n    window.removeEventListener('resize', this.updateCameraAspect.bind(this));\n  }\n\n  init() {\n    this.initContainer();\n    this.initScene();\n    this.initCamera();\n    this.initControls();\n    this.initRenderer();\n    this.loadScene();\n    this.animate();\n  }\n\n  initContainer() {\n    this.container = ReactDOM.findDOMNode(this);\n    this.updateAspect();\n  }\n\n  initScene() {\n    this.scene = new THREE.Scene();\n  }\n\n  initCamera() {\n    this.camera = new THREE.PerspectiveCamera(45, this.aspect.width / this.aspect.height, 1, 10000);\n    this.camera.position.z = 3000;\n  }\n\n  initControls() {}\n\n  initRenderer() {\n    // renderer\n    this.renderer = new THREE.WebGLRenderer();\n\n    this.updateCameraAspect();\n    this.renderWebGL();\n  }\n\n  loadScene() {\n    this.requestRender();\n  }\n\n  updateAspect() {\n    this.aspect = {\n      width: this.container.clientWidth,\n      height: window.innerHeight\n    };\n  }\n\n  updateCameraAspect() {\n    if (this.renderer === null) return;\n\n    this.updateAspect();\n    this.camera.aspect = this.aspect.width / this.aspect.height;\n    this.camera.updateProjectionMatrix();\n    this.renderer.setSize(this.aspect.width, this.aspect.height);\n    this.requestRender();\n  }\n\n  requestRender() {\n    this.needRender = true;\n  }\n\n  animate() {\n    this.request = requestAnimationFrame(this.animate.bind(this));\n\n    if (this.needRender) {\n      this.renderWebGL();\n      this.needRender = false;\n    }\n  }\n\n\n  renderWebGL() {\n    console.log('render');\n    this.renderer.render(this.scene, this.camera);\n  }\n\n  render() {\n    return (\n      <div id=\"canvas-container\">\n      </div>\n    );\n  }\n}\n\nEditor.propTypes = {\n  needRenderer: PropTypes.bool,\n  objects: PropTypes.array,\n  targets: PropTypes.object\n};\n\nexport default Editor;\n"]}