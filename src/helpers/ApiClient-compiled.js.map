{"version":3,"sources":["ApiClient.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;;;;AACA;;;;;;AAEA,IAAM,UAAU,CAAC,KAAD,EAAQ,MAAR,EAAgB,KAAhB,EAAuB,OAAvB,EAAgC,KAAhC,CAAhB;;AAEA,SAAS,SAAT,CAAmB,IAAnB,EAAyB;AACvB,MAAM,eAAe,KAAK,CAAL,MAAY,GAAZ,GAAkB,MAAM,IAAxB,GAA+B,IAApD;AACA,MAAI,UAAJ,EAAgB;AACd;AACA,WAAO,YAAY,iBAAO,OAAnB,GAA6B,GAA7B,GAAmC,iBAAO,OAA1C,GAAoD,YAA3D;AACD;AACD;AACA,SAAO,SAAS,YAAhB;AACD;;IAEoB,S;AACnB,qBAAY,GAAZ,EAAiB;AAAA;;AAAA;;AACf,YAAQ,OAAR,CAAgB,UAAC,MAAD;AAAA,aACd,MAAK,MAAL,IAAe,UAAC,IAAD;AAAA,uFAA0B,EAA1B;AAAA,YAAS,MAAT,QAAS,MAAT;AAAA,YAAiB,IAAjB,QAAiB,IAAjB;;AAAA,eAAiC,sBAAY,UAAC,OAAD,EAAU,MAAV,EAAqB;AAC/E,cAAM,UAAU,qBAAW,MAAX,EAAmB,UAAU,IAAV,CAAnB,CAAhB;;AAEA,cAAI,MAAJ,EAAY;AACV,oBAAQ,KAAR,CAAc,MAAd;AACD;;AAED,cAAI,cAAc,IAAI,GAAJ,CAAQ,QAAR,CAAlB,EAAqC;AACnC,oBAAQ,GAAR,CAAY,QAAZ,EAAsB,IAAI,GAAJ,CAAQ,QAAR,CAAtB;AACD;;AAED,cAAI,IAAJ,EAAU;AACR,oBAAQ,IAAR,CAAa,IAAb;AACD;;AAED,kBAAQ,GAAR,CAAY,UAAC,GAAD;AAAA,4FAAiB,EAAjB;AAAA,gBAAQ,IAAR,SAAQ,IAAR;;AAAA,mBAAwB,MAAM,OAAO,QAAQ,GAAf,CAAN,GAA4B,QAAQ,IAAR,CAApD;AAAA,WAAZ;AACD,SAhB+C,CAAjC;AAAA,OADD;AAAA,KAAhB;AAkBD;AACD;;;;;;;;;;;;;;4BAUQ,CAAE;;;;;kBA/BS,S","file":"ApiClient-compiled.js","sourcesContent":["import superagent from 'superagent';\nimport config from '../config';\n\nconst methods = ['get', 'post', 'put', 'patch', 'del'];\n\nfunction formatUrl(path) {\n  const adjustedPath = path[0] !== '/' ? '/' + path : path;\n  if (__SERVER__) {\n    // Prepend host and port of the API server to the path.\n    return 'http://' + config.apiHost + ':' + config.apiPort + adjustedPath;\n  }\n  // Prepend `/api` to relative URL, to proxy to API server.\n  return '/api' + adjustedPath;\n}\n\nexport default class ApiClient {\n  constructor(req) {\n    methods.forEach((method) =>\n      this[method] = (path, { params, data } = {}) => new Promise((resolve, reject) => {\n        const request = superagent[method](formatUrl(path));\n\n        if (params) {\n          request.query(params);\n        }\n\n        if (__SERVER__ && req.get('cookie')) {\n          request.set('cookie', req.get('cookie'));\n        }\n\n        if (data) {\n          request.send(data);\n        }\n\n        request.end((err, { body } = {}) => err ? reject(body || err) : resolve(body));\n      }));\n  }\n  /*\n   * There's a V8 bug where, when using Babel, exporting classes with only\n   * constructors sometimes fails. Until it's patched, this is a solution to\n   * \"ApiClient is not defined\" from issue #14.\n   * https://github.com/erikras/react-redux-universal-hot-example/issues/14\n   *\n   * Relevant Babel bug (but they claim it's V8): https://phabricator.babeljs.io/T2455\n   *\n   * Remove it at your own risk.\n   */\n  empty() {}\n}\n"]}